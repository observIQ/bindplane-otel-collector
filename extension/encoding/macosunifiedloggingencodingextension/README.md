# macOS Unified Logging Encoding Extension

<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [alpha]   |
| Distributions | []        |
| Issues        | []        |

[alpha]: https://github.com/open-telemetry/opentelemetry-collector#alpha
<!-- end autogenerated section -->

## Description

The macOS Unified Logging encoding extension provides decoding capabilities for macOS Unified Logging binary data (tracev3 format). This extension converts binary tracev3 files into structured OpenTelemetry log records.

This extension is designed to work with the macOS Unified Logging receiver and implements the `LogsUnmarshalerExtension` interface for decoding binary log data.

## Configuration

```yaml
extensions:
  macosunifiedlogencoding:
    debug_mode: false
```

### Configuration Parameters

- `debug_mode` (optional, default: `false`): Enables verbose debug logging during decoding operations

## How It Works

The extension decodes macOS Unified Logging binary data by:

1. Parsing tracev3 file format containing log entries
2. Processing firehose, simpledump, and statedump log types
3. Resolving message strings using UUID text and DSC (Dynamic Shared Cache) data
4. Converting continuous time values to absolute timestamps using timesync data
5. Formatting log messages with proper attribute mapping

The extension works in conjunction with the receiver which provides:
- Raw tracev3 data
- Timesync data for accurate timestamp conversion
- UUID text data for message string resolution
- DSC data for shared cache string lookups

## Example Usage

```yaml
extensions:
  macosunifiedlogencoding:

receivers:
  macosunifiedlogging:
    encoding_extension: "macosunifiedlogencoding"
    tracev3_paths:
      - "/var/db/diagnostics/Persist/*.tracev3"
    timesync_paths:
      - "/var/db/diagnostics/timesync/*.timesync"
    uuidtext_paths:
      - "/var/db/uuidtext/[0-9A-F][0-9A-F]/*"
    dsc_paths:
      - "/var/db/diagnostics/dsc/*"

exporters:
  debug:
    verbosity: detailed

service:
  extensions: [macosunifiedlogencoding]
  pipelines:
    logs:
      receivers: [macosunifiedlogging]
      exporters: [debug]
```
